#####################################################################
# Description: schematics for provided endpoints by the server
# Version: 1.0
#
# Changes:
# 11.09.2018 - file creation. version: 1.0 @Markus Jacobsen
# 13.09.2018 - added endpoint for updating a user. Added more response options for createUser
# 13.09.2018 - added endpoints for uploading a file
# 14.09.2018 - added endpoint for deleting a user and getting a user
# 27.09.2018 - added endpoint for showing a list of tracks
# 27.09.2018 - added endpoint for inserting a track record in DB
# 04.10.2018 - added correct header for /insertTrack + private field
#####################################################################

/createUser:
  method: POST
  summary: Create a new user in firebase user system
  params:
    - name: User
      type: @User # See endpoints-models. Note fields emailVerified and uid will be ignored
      description: Struct for a User
      required: true
  response:
    - code: 200
      description: New user added successfully
      content-type: application/json
    - code: 400
      description: bad-request, the payload is proberly badly formatted, server cannot decode
      content-type: application/json
    - code: 405
      description: Invalid method.
      content-type: application/json

/updateUser:
  method: POST
  summary: Update attributes of a user
  params:
    - name: User
      type: @User # See endpoints-models. All fields are required
      description: New struct for a updated user
      required: true
  response:
    - code: 200
      description: User updated successfully
      content-type: application/json
    - code: 400
      description: bad-request, the payload is proberly badly formatted, server cannot decode
      content-type: application/json

/deleteuser:
  method: GET
  summary: Delete a user
  params:
  - name: uId
    type: String
    description: Id of user to delete
    required: true
  response:
  - code: 200
    description: User deleted successfully
    content-type: application/json
  - code: 400
    description: bad-request, the payload is proberly badly formatted, server cannot decode
    content-type: application/json

/getUser:
  method: GET
    summary: Get a user
    params:
    - name: uId
      type: String
      description: Id of user to get
      required: true
    response:
    - code: 200
      description: User fetched successfully
      content-type: application/json
    - code: 400
      description: bad-request, the payload is proberly badly formatted, server cannot decode
      content-type: application/json

# Deprecated, use insertTrack instead
/uploadFile:
  method: POST
  summary: Upload a IGC file to the server
  params:
    - name: uid
      type: string
      description: Uploading user's id
      required: true
    - name: file
      type: string
      description:
      required: true
  responses:
    - code: 200
      reason: File successfully processed
      content-type: application/json
    - code: 400
      reason: something went wrong in processing the file or no supplied uid
      content-type: application/json
    - code: 415
      reason: File not off correct mime. We only support .IGC
      content-type: application/json

/getTracks:
  method: GET
    summary: Get list of IGC tracks
    params:
    - name: uid
      type: string
      description: Requesting user id
      required: true
    - name: timeSkip
      type: string
      description: Skip to after this timestamp
      required: false (default = 1)
    - name: queryType
      type: string
      description: Type of query to be made
      available: Private, Public
      required: false (default = Public)
    - name: orderDirection
      type: string
      description: Direction of the order
      required: false (default = Asc)
    response:
    - code: 200
      description: List fetched successfully
      content-type: application/json
    - code: 400
      description: bad request, cannot handle the request
      content-type: application/json
    - code: 403
      description: unauthorized, user id cannot be authenticated
      content-type: application/json

/insertTrack:
  method: POST
    header: multipart/form-data
    summary: Upload a IGC file to the server
    params:
    - name: uid
      type: string, form-data
      description: Uploading user's id
      required: true
    - name: private
      type: boolean, form-data
      description: file private/public
      required: true
    - name: file
      type: string, form-data
      description:
      required: true
    responses:
    - code: 200
      reason: File successfully processed
      content-type: application/json
    - code: 400
      reason: something went wrong in processing the file or no supplied uid
      content-type: application/json
    - code: 415
      reason: File not off correct mime. We only support .IGC
      content-type: application/json
